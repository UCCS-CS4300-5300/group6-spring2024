{% extends 'templates/base_template.html' %}

{% block content %}
<style>
  .card-row {
    max-width: 78%;
    margin: 0 auto;
  }

  .img-fluid {
    height: 100px;
    object-fit: cover;
    width: auto;
  }

  .bottom-btn {
    margin-left: 11%;
    margin-top: 1.5%;
    margin-bottom: 3%;
  }

  @media (max-width: 768px) {
    .img-fluid {
      width: 100%; /* Full width on smaller screens */
      height: auto; /* Adjusts height automatically */
    }

    .col-md-2, .col-md-8 {
      flex: 0 0 100%;
      max-width: 100%;
    }
  }

  @media (max-width: 364px) {
    .custom-btn-smaller {
      font-size: 0.75rem; /* Smaller font size */
      padding: .25rem .5rem; /* Smaller padding */
    }
  }
</style>

<div class="container text-center">
  <h1 style="margin-top:65px;">{{ item.name }}</h1>

  <!-- Main image -->
  <div class="row">
    <div class="col"></div>
    <div class="col-6 bg-light">
      <div class="ratio ratio-1x1" style="max-width: 366px; margin: auto;">
        <div class="d-flex justify-content-center align-items-center bg-light" style="height: 100%;">
          <img src="{{item.image.url}}" class="img-responsive" style="width: 100%; max-height: 100%; object-fit: cover;" alt="Item Image"/>
        </div>
      </div>
    </div>
    <div class="col"></div>
  </div>
  <h2 class="row justify-content-center text-center"> Reviews </h2> 
    <form method="GET">
      {{ item_filter.form }}
      <button type="submit" class="btn custom-btn custom-btn-smaller">Search</button>
    </form> 
  {% if reviews %}
  
    {% for review in reviews %}
    <div class="row justify-content-center mb-0">
      <div class="card card-row m-0 position-relative">
        <div class="row">
          <div class="d-flex align-items-center justify-content-center">
            <div class="card-body text-start">
              <h3 class="card-title mb-0"">{{review.user}}</h3>
              <p class="card-body">{{ review.review }}</p>
              <p class="card-body">Stars: {{ review.num_stars }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  {% else %}
    <div class="row justify-content-center mb-0">
      <div class="card card-row m-0 position-relative">
        <div class="row">
          <div class="col-2 d-flex align-items-center justify-content-center">
          </div>
          <div class="col d-flex align-items-center ms-1 justify-content-center"> 
            <div class="card-body text-start">
              <h3 class="card-title mb-0">No Reviews exist yet for this Item.</h3>
            </div>
          </div>
        </div>
      </div>
    </div>
  {% endif %}
  <p></p>
  <p></p>
  <!--Add review button -->
  <div class="row">
    <div class="col"></div>
      <div class="col-7" style="height: 48px;"></div>
        <div class="col position-relative">
      <a class="btn custom-btn custom-btn-smaller position-absolute bottom-0 start-0 mb-3" href="{% url 'add_review_item' %}">Add Review</a>
        </div>
    </div>


  
{% endblock %}